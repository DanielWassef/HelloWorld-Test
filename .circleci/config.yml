version: 2.1

jobs:
  Test_Cash_create:
    docker: 
      - image: circleci/node:13.8.0
        environment:
          F1: cash.txt
          F2: cash_path.txt
    steps:
      - run: 
          echo "F1 = $F1"
      - run: 
          echo "I am a cash test" > cash.txt
      - run: 
          echo "I am a cash test in path" > ./path/cash_path.txt
#To save a cache of a file or directory, add the save_cache step to a job in your .circleci/config.yml file:
      - save_cache:
          key: mytxt-v1-{{ .Branch }}-{{ checksum "config.yml" }}
          paths:
            - cash.txt
            - ./path/cash_path.txt

  Test_Cash_restore:
    docker: 
      - image: circleci/node:13.8.0
        environment:
          F1: cash.txt
          F2: cash_path.txt
    steps:
      - restore_cache:
          keys: 
            - mytxt-v1-{{ .Branch }}-{{ checksum "config.yml" }}
            - mytxt-v1-{{ .Branch }}
            - mytxt-v1
      - run:
          cat $F1
          cat ./path/$F2
workflows:
  Cash_test:
    jobs:
      - Test_Cash_create
      - Test_Cash_restore:
          requires:
            - Test_Cash_create
